{"id":"node_modules/@ngraveio/bc-ur/dist/urEncoder.js","dependencies":[{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@ngraveio/bc-ur/dist/urEncoder.js.map","includedInParent":true,"mtime":1635871978871},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@ngraveio/bc-ur/src/urEncoder.ts","includedInParent":true,"mtime":1635871978871},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/package.json","includedInParent":true,"mtime":1637150058124},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@ngraveio/bc-ur/package.json","includedInParent":true,"mtime":1635871978871},{"name":"./fountainEncoder","loc":{"line":6,"column":50},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@ngraveio/bc-ur/dist/urEncoder.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@ngraveio/bc-ur/dist/fountainEncoder.js"},{"name":"./bytewords","loc":{"line":7,"column":44},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@ngraveio/bc-ur/dist/urEncoder.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@ngraveio/bc-ur/dist/bytewords.js"}],"generated":{"js":"\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fountainEncoder_1 = __importDefault(require(\"./fountainEncoder\"));\nconst bytewords_1 = __importDefault(require(\"./bytewords\"));\nclass UREncoder {\n    constructor(_ur, maxFragmentLength, firstSeqNum, minFragmentLength) {\n        this.ur = _ur;\n        this.fountainEncoder = new fountainEncoder_1.default(_ur.cbor, maxFragmentLength, firstSeqNum, minFragmentLength);\n    }\n    get fragmentsLength() { return this.fountainEncoder.fragmentsLength; }\n    get fragments() { return this.fountainEncoder.fragments; }\n    get messageLength() { return this.fountainEncoder.messageLength; }\n    get cbor() { return this.ur.cbor; }\n    encodeWhole() {\n        return [...new Array(this.fragmentsLength)].map(() => this.nextPart());\n    }\n    nextPart() {\n        const part = this.fountainEncoder.nextPart();\n        if (this.fountainEncoder.isSinglePart()) {\n            return UREncoder.encodeSinglePart(this.ur);\n        }\n        else {\n            return UREncoder.encodePart(this.ur.type, part);\n        }\n    }\n    static encodeUri(scheme, pathComponents) {\n        const path = pathComponents.join('/');\n        return [scheme, path].join(':');\n    }\n    static encodeUR(pathComponents) {\n        return UREncoder.encodeUri('ur', pathComponents);\n    }\n    static encodePart(type, part) {\n        const seq = `${part.seqNum}-${part.seqLength}`;\n        const body = bytewords_1.default.encode(part.cbor().toString('hex'), bytewords_1.default.STYLES.MINIMAL);\n        return UREncoder.encodeUR([type, seq, body]);\n    }\n    static encodeSinglePart(ur) {\n        const body = bytewords_1.default.encode(ur.cbor.toString('hex'), bytewords_1.default.STYLES.MINIMAL);\n        return UREncoder.encodeUR([ur.type, body]);\n    }\n}\nexports.default = UREncoder;\n"},"sourceMaps":{"js":{"version":3,"file":"urEncoder.js","sourceRoot":"","sources":["../src/urEncoder.ts"],"names":[],"mappings":";;;;;AAAA,wEAAyE;AACzE,4DAAoC;AAGpC,MAAqB,SAAS;IAI5B,YACE,GAAO,EACP,iBAA0B,EAC1B,WAAoB,EACpB,iBAA0B;QAE1B,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;QACd,IAAI,CAAC,eAAe,GAAG,IAAI,yBAAe,CAAC,GAAG,CAAC,IAAI,EAAE,iBAAiB,EAAE,WAAW,EAAE,iBAAiB,CAAC,CAAC;IAC1G,CAAC;IAED,IAAW,eAAe,KAAK,OAAO,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,CAAC,CAAC;IAC7E,IAAW,SAAS,KAAK,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC;IACjE,IAAW,aAAa,KAAK,OAAO,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,CAAC,CAAC;IACzE,IAAW,IAAI,KAAK,OAAO,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;IAEnC,WAAW;QAChB,OAAO,CAAC,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAA;IACxE,CAAC;IAEM,QAAQ;QACb,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;QAE7C,IAAI,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,EAAE;YACvC,OAAO,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAC5C;aACI;YACH,OAAO,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;SAChD;IACH,CAAC;IAEO,MAAM,CAAC,SAAS,CAAC,MAAc,EAAE,cAAwB;QAC/D,MAAM,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACtC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IACjC,CAAC;IAEO,MAAM,CAAC,QAAQ,CAAC,cAAwB;QAC9C,OAAO,SAAS,CAAC,SAAS,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;IACnD,CAAC;IAEO,MAAM,CAAC,UAAU,CAAC,IAAY,EAAE,IAAyB;QAC/D,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QAC/C,MAAM,IAAI,GAAG,mBAAS,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,mBAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAErF,OAAO,SAAS,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAA;IAC9C,CAAC;IAEM,MAAM,CAAC,gBAAgB,CAAC,EAAM;QACnC,MAAM,IAAI,GAAG,mBAAS,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,mBAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAEjF,OAAO,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAA;IAC5C,CAAC;CACF;AAvDD,4BAuDC","sourcesContent":["import FountainEncoder, { FountainEncoderPart } from './fountainEncoder';\nimport bytewords from './bytewords';\nimport UR from './ur';\n\nexport default class UREncoder {\n  private ur: UR;\n  private fountainEncoder: FountainEncoder;\n\n  constructor(\n    _ur: UR,\n    maxFragmentLength?: number,\n    firstSeqNum?: number,\n    minFragmentLength?: number,\n  ) {\n    this.ur = _ur;\n    this.fountainEncoder = new FountainEncoder(_ur.cbor, maxFragmentLength, firstSeqNum, minFragmentLength);\n  }\n\n  public get fragmentsLength() { return this.fountainEncoder.fragmentsLength; }\n  public get fragments() { return this.fountainEncoder.fragments; }\n  public get messageLength() { return this.fountainEncoder.messageLength; }\n  public get cbor() { return this.ur.cbor; }\n\n  public encodeWhole(): string[] {\n    return [...new Array(this.fragmentsLength)].map(() => this.nextPart())\n  }\n\n  public nextPart(): string {\n    const part = this.fountainEncoder.nextPart();\n\n    if (this.fountainEncoder.isSinglePart()) {\n      return UREncoder.encodeSinglePart(this.ur);\n    }\n    else {\n      return UREncoder.encodePart(this.ur.type, part)\n    }\n  }\n\n  private static encodeUri(scheme: string, pathComponents: string[]): string {\n    const path = pathComponents.join('/');\n    return [scheme, path].join(':')\n  }\n\n  private static encodeUR(pathComponents: string[]): string {\n    return UREncoder.encodeUri('ur', pathComponents);\n  }\n\n  private static encodePart(type: string, part: FountainEncoderPart): string {\n    const seq = `${part.seqNum}-${part.seqLength}`;\n    const body = bytewords.encode(part.cbor().toString('hex'), bytewords.STYLES.MINIMAL);\n\n    return UREncoder.encodeUR([type, seq, body])\n  }\n\n  public static encodeSinglePart(ur: UR): string {\n    const body = bytewords.encode(ur.cbor.toString('hex'), bytewords.STYLES.MINIMAL);\n\n    return UREncoder.encodeUR([ur.type, body])\n  }\n}"]}},"error":null,"hash":"5797041e04c52701ff3ba13d59e4ec88","cacheData":{"env":{}}}
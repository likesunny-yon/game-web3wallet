{"id":"node_modules/@shapeshiftoss/hdwallet-keepkey/dist/adapter.js","dependencies":[{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/adapter.js.map","includedInParent":true,"mtime":1637149977864},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/package.json","includedInParent":true,"mtime":1637150058124},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/package.json","includedInParent":true,"mtime":1637149977864},{"name":"@shapeshiftoss/hdwallet-core","loc":{"line":32,"column":34},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/adapter.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-core/dist/index.js"},{"name":"./keepkey","loc":{"line":33,"column":26},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/adapter.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/keepkey.js"},{"name":"./transport","loc":{"line":34,"column":28},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/adapter.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js"}],"generated":{"js":"\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Adapter = void 0;\nconst core = __importStar(require(\"@shapeshiftoss/hdwallet-core\"));\nconst keepkey_1 = require(\"./keepkey\");\nconst transport_1 = require(\"./transport\");\nclass Adapter {\n    constructor(keyring, delegate) {\n        var _a, _b;\n        this.keyring = keyring;\n        this.delegate = delegate;\n        try {\n            (_b = (_a = this.delegate).registerCallbacks) === null || _b === void 0 ? void 0 : _b.call(_a, this.handleConnect.bind(this), this.handleDisconnect.bind(this));\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    static fromDelegate(delegate) {\n        const fn = (keyring) => new Adapter(keyring, delegate);\n        const out = fn;\n        out.useKeyring = fn;\n        return out;\n    }\n    static inspectDevice(delegate, device) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const props = (_b = (yield Promise.resolve((_a = delegate.inspectDevice) === null || _a === void 0 ? void 0 : _a.call(delegate, device)))) !== null && _b !== void 0 ? _b : ([\"object\", \"function\"].includes(typeof device) ? device : {});\n            if (!props.serialNumber && typeof device === \"string\")\n                props.serialNumber = device;\n            return {\n                get productName() {\n                    const out = props[\"productName\"];\n                    return typeof out === \"string\" ? out : \"KeepKey\";\n                },\n                get serialNumber() {\n                    const out = props[\"serialNumber\"];\n                    if (typeof out !== \"string\")\n                        throw new Error(\"could not get serialNumber from device\");\n                    return out;\n                },\n            };\n        });\n    }\n    inspectDevice(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return Adapter.inspectDevice(this.delegate, device);\n        });\n    }\n    handleConnect(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.initialize([device]);\n                const { productName, serialNumber } = yield this.inspectDevice(device);\n                yield this.keyring.emit([productName, serialNumber, core.Events.CONNECT], serialNumber);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n    handleDisconnect(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { productName, serialNumber } = yield this.inspectDevice(device);\n            try {\n                yield this.keyring.remove(serialNumber);\n            }\n            catch (_a) { }\n            yield this.keyring.emit([productName, serialNumber, core.Events.DISCONNECT], serialNumber);\n        });\n    }\n    initialize(devices, tryDebugLink, autoConnect) {\n        return __awaiter(this, void 0, void 0, function* () {\n            devices = devices !== null && devices !== void 0 ? devices : (yield this.getDevices());\n            for (const device of devices) {\n                const { serialNumber } = yield this.inspectDevice(device);\n                if (this.keyring.wallets[serialNumber])\n                    yield this.keyring.remove(serialNumber);\n                const delegate = yield this.getTransportDelegate(device);\n                if (delegate === null)\n                    continue;\n                const transport = yield transport_1.Transport.create(this.keyring, delegate);\n                yield transport.connect();\n                if (tryDebugLink)\n                    yield transport.tryConnectDebugLink();\n                const wallet = yield keepkey_1.KeepKeyHDWallet.create(transport);\n                if (autoConnect)\n                    yield wallet.initialize();\n                this.keyring.add(wallet, serialNumber);\n            }\n            return Object.keys(this.keyring.wallets).length;\n        });\n    }\n    getDevice(serialNumber) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.delegate.getDevice)\n                return yield this.delegate.getDevice(serialNumber);\n            if (!serialNumber)\n                throw new Error(\"no default device specified\");\n            const devices = yield this.getDevices();\n            return (yield Promise.all(devices.map((x) => __awaiter(this, void 0, void 0, function* () { return ((yield this.inspectDevice(x)).serialNumber === serialNumber ? x : null); })))).filter((x) => x !== null)[0];\n        });\n    }\n    getDevices() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.delegate.getDevices)\n                return yield this.delegate.getDevices();\n            let defaultDevice = undefined;\n            try {\n                defaultDevice = yield this.getDevice();\n            }\n            catch (_a) { }\n            return defaultDevice ? [defaultDevice] : [];\n        });\n    }\n    getTransportDelegate(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.delegate.getTransportDelegate(device);\n        });\n    }\n    pairDevice(serialNumber, tryDebugLink) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const device = yield this.getDevice(serialNumber);\n            if (!device)\n                throw new Error(serialNumber\n                    ? `could not find device matching serial number '${serialNumber}'`\n                    : \"could not find default device\");\n            return this.pairRawDevice(device, tryDebugLink);\n        });\n    }\n    pairRawDevice(device, tryDebugLink) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initialize([device], tryDebugLink, true);\n            return core.mustBeDefined(this.keyring.get((yield this.inspectDevice(device)).serialNumber));\n        });\n    }\n}\nexports.Adapter = Adapter;\n"},"sourceMaps":{"js":{"version":3,"file":"adapter.js","sourceRoot":"","sources":["../src/adapter.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"cab724e997245af9e7e94bf77e712de5","cacheData":{"env":{}}}
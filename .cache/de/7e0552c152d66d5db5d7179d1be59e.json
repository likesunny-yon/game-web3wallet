{"id":"node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/dist/adapter.js","dependencies":[{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/dist/adapter.js.map","includedInParent":true,"mtime":1637149977859},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/package.json","includedInParent":true,"mtime":1637150058124},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/package.json","includedInParent":true,"mtime":1637149977859},{"name":"@shapeshiftoss/hdwallet-core","loc":{"line":33,"column":34},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/dist/adapter.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-core/dist/index.js"},{"name":"@shapeshiftoss/hdwallet-keepkey","loc":{"line":34,"column":37},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/dist/adapter.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/index.js"},{"name":"./transport","loc":{"line":35,"column":28},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/dist/adapter.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/dist/transport.js"},{"name":"./utils","loc":{"line":36,"column":24},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/dist/adapter.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey-webusb/dist/utils.js"}],"generated":{"js":"\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebUSBKeepKeyAdapter = exports.Adapter = exports.AdapterDelegate = void 0;\nconst core = __importStar(require(\"@shapeshiftoss/hdwallet-core\"));\nconst keepkey = __importStar(require(\"@shapeshiftoss/hdwallet-keepkey\"));\nconst transport_1 = require(\"./transport\");\nconst utils_1 = require(\"./utils\");\n// This avoids a prompt ReferenceError if the module is imported outside a browser.\nconst webUSB = typeof window === \"object\" && ((_a = window === null || window === void 0 ? void 0 : window.navigator) === null || _a === void 0 ? void 0 : _a.usb);\nfunction assertWebUSB(webUSB) {\n    if (!webUSB)\n        throw new core.WebUSBNotAvailable();\n}\nexports.AdapterDelegate = {\n    getDevices() {\n        return __awaiter(this, void 0, void 0, function* () {\n            assertWebUSB(webUSB);\n            const devices = (yield webUSB.getDevices()).filter((d) => d.serialNumber !== undefined);\n            return devices.filter((x) => x.vendorId === utils_1.VENDOR_ID && [utils_1.WEBUSB_PRODUCT_ID, utils_1.HID_PRODUCT_ID].includes(x.productId));\n        });\n    },\n    getDevice(serialNumber) {\n        return __awaiter(this, void 0, void 0, function* () {\n            assertWebUSB(webUSB);\n            try {\n                const out = yield webUSB.requestDevice({\n                    filters: [\n                        { vendorId: utils_1.VENDOR_ID, productId: utils_1.WEBUSB_PRODUCT_ID, serialNumber },\n                        { vendorId: utils_1.VENDOR_ID, productId: utils_1.HID_PRODUCT_ID, serialNumber },\n                    ],\n                });\n                if (out.serialNumber === undefined)\n                    throw new Error(\"expected serial number\");\n                return out;\n            }\n            catch (e) {\n                throw new core.WebUSBCouldNotPair(\"KeepKey\", String(core.isIndexable(e) ? e.message : e));\n            }\n        });\n    },\n    getTransportDelegate(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new transport_1.TransportDelegate(device);\n        });\n    },\n    registerCallbacks(handleConnect, handleDisconnect) {\n        assertWebUSB(webUSB);\n        function handleUSBEvent(connecting, e) {\n            return __awaiter(this, void 0, void 0, function* () {\n                const device = e.device;\n                if (device.vendorId !== utils_1.VENDOR_ID)\n                    return;\n                if (device.productId !== utils_1.WEBUSB_PRODUCT_ID)\n                    return;\n                return (connecting ? handleConnect : handleDisconnect)(device);\n            });\n        }\n        webUSB.addEventListener(\"connect\", handleUSBEvent.bind(null, true));\n        webUSB.addEventListener(\"disconnect\", handleUSBEvent.bind(null, false));\n    },\n};\nexports.Adapter = keepkey.Adapter.fromDelegate(exports.AdapterDelegate);\nexports.WebUSBKeepKeyAdapter = exports.Adapter;\n"},"sourceMaps":{"js":{"version":3,"file":"adapter.js","sourceRoot":"","sources":["../src/adapter.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mEAAqD;AACrD,yEAA2D;AAE3D,2CAAwD;AACxD,mCAAuE;AAEvE,mFAAmF;AACnF,MAAM,MAAM,GAAG,OAAO,MAAM,KAAK,QAAQ,KAAI,MAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,SAAS,0CAAE,GAAc,CAAA,CAAC;AAG/E,SAAS,YAAY,CAAC,MAAW;IAC/B,IAAI,CAAC,MAAM;QAAE,MAAM,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;AACnD,CAAC;AAEY,QAAA,eAAe,GAAG;IACvB,UAAU;;YACd,YAAY,CAAC,MAAM,CAAC,CAAC;YACrB,MAAM,OAAO,GAAG,CAAC,MAAM,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,YAAY,KAAK,SAAS,CAAa,CAAC;YACpG,OAAO,OAAO,CAAC,MAAM,CACnB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,iBAAS,IAAI,CAAC,yBAAiB,EAAE,sBAAc,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAC7F,CAAC;QACJ,CAAC;KAAA;IACK,SAAS,CAAC,YAAqB;;YACnC,YAAY,CAAC,MAAM,CAAC,CAAC;YACrB,IAAI;gBACF,MAAM,GAAG,GAAG,MAAM,MAAM,CAAC,aAAa,CAAC;oBACrC,OAAO,EAAE;wBACP,EAAE,QAAQ,EAAE,iBAAS,EAAE,SAAS,EAAE,yBAAiB,EAAE,YAAY,EAAE;wBACnE,EAAE,QAAQ,EAAE,iBAAS,EAAE,SAAS,EAAE,sBAAc,EAAE,YAAY,EAAE;qBACjE;iBACF,CAAC,CAAC;gBACH,IAAI,GAAG,CAAC,YAAY,KAAK,SAAS;oBAAE,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;gBAC9E,OAAO,GAAa,CAAC;aACtB;YAAC,OAAO,CAAC,EAAE;gBACV,MAAM,IAAI,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC3F;QACH,CAAC;KAAA;IACK,oBAAoB,CAAC,MAAc;;YACvC,OAAO,IAAI,6BAAiB,CAAC,MAAM,CAAC,CAAC;QACvC,CAAC;KAAA;IACD,iBAAiB,CAAC,aAA0C,EAAE,gBAA6C;QACzG,YAAY,CAAC,MAAM,CAAC,CAAC;QAErB,SAAe,cAAc,CAAC,UAAmB,EAAE,CAAqB;;gBACtE,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;gBACxB,IAAI,MAAM,CAAC,QAAQ,KAAK,iBAAS;oBAAE,OAAO;gBAC1C,IAAI,MAAM,CAAC,SAAS,KAAK,yBAAiB;oBAAE,OAAO;gBACnD,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC,CAAC;YACjE,CAAC;SAAA;QAED,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;QACpE,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;IAC1E,CAAC;CACF,CAAC;AAEW,QAAA,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,uBAAe,CAAC,CAAC;AACxD,QAAA,oBAAoB,GAAG,eAAO,CAAC","sourcesContent":[null]}},"error":null,"hash":"bc682fe93b2ced3e67220e1c4443c634","cacheData":{"env":{}}}
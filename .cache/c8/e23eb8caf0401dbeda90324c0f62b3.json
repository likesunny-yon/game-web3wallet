{"id":"node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","dependencies":[{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js.map","includedInParent":true,"mtime":1637149977864},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/package.json","includedInParent":true,"mtime":1637150058124},{"name":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/package.json","includedInParent":true,"mtime":1637149977864},{"name":"@keepkey/device-protocol/lib/messages_pb","loc":{"line":32,"column":38},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@keepkey/device-protocol/lib/messages_pb.js"},{"name":"@keepkey/device-protocol/lib/types_pb","loc":{"line":33,"column":35},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@keepkey/device-protocol/lib/types_pb.js"},{"name":"@shapeshiftoss/hdwallet-core","loc":{"line":34,"column":34},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-core/dist/index.js"},{"name":"google-protobuf","loc":{"line":35,"column":34},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/google-protobuf/google-protobuf.js"},{"name":"./responseTypeRegistry","loc":{"line":36,"column":39},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/responseTypeRegistry.js"},{"name":"./typeRegistry","loc":{"line":37,"column":31},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/typeRegistry.js"},{"name":"./utils","loc":{"line":38,"column":24},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/utils.js"},{"name":"crypto","loc":{"line":131,"column":43},"parent":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/@shapeshiftoss/hdwallet-keepkey/dist/transport.js","resolved":"/home/ryann/Documents/Repos/ChainSafe/Gaming/game-web3mobile/node_modules/crypto-browserify/index.js"}],"generated":{"js":"\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transport = void 0;\nconst Messages = __importStar(require(\"@keepkey/device-protocol/lib/messages_pb\"));\nconst Types = __importStar(require(\"@keepkey/device-protocol/lib/types_pb\"));\nconst core = __importStar(require(\"@shapeshiftoss/hdwallet-core\"));\nconst jspb = __importStar(require(\"google-protobuf\"));\nconst responseTypeRegistry_1 = require(\"./responseTypeRegistry\");\nconst typeRegistry_1 = require(\"./typeRegistry\");\nconst utils_1 = require(\"./utils\");\nclass Transport extends core.Transport {\n    constructor(keyring, delegate) {\n        super(keyring);\n        this.debugLink = false;\n        this.userActionRequired = false;\n        /// One per transport, unlike on Trezor, since the contention is\n        /// only per-device, not global.\n        this.callInProgress = {\n            main: undefined,\n            debug: undefined,\n        };\n        this.delegate = delegate;\n    }\n    static create(keyring, delegate) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Transport(keyring, delegate);\n        });\n    }\n    isOpened() {\n        return this.delegate.isOpened();\n    }\n    getDeviceID() {\n        return this.delegate.getDeviceID();\n    }\n    connect() {\n        return this.delegate.connect();\n    }\n    tryConnectDebugLink() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let out = false;\n            if (this.delegate.tryConnectDebugLink && (yield this.delegate.tryConnectDebugLink()))\n                out = true;\n            this.debugLink = out;\n            return out;\n        });\n    }\n    disconnect() {\n        return this.delegate.disconnect();\n    }\n    write(buf, debugLink) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // break frame into segments\n            for (let i = 0; i < buf.length; i += utils_1.SEGMENT_SIZE) {\n                const segment = buf.slice(i, i + utils_1.SEGMENT_SIZE);\n                const padding = new Uint8Array(utils_1.SEGMENT_SIZE - segment.length);\n                const fragments = [];\n                fragments.push(new Uint8Array([utils_1.SEGMENT_SIZE]));\n                fragments.push(segment);\n                fragments.push(padding);\n                const fragmentBuffer = new Uint8Array(fragments.map((x) => x.length).reduce((a, x) => a + x, 0));\n                fragments.reduce((a, x) => (fragmentBuffer.set(x, a), a + x.length), 0);\n                yield this.delegate.writeChunk(fragmentBuffer, debugLink);\n            }\n        });\n    }\n    read(debugLink) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const first = yield this.delegate.readChunk(debugLink);\n            // Check that buffer starts with: \"?##\" [ 0x3f, 0x23, 0x23 ]\n            // \"?\" = USB reportId, \"##\" = KeepKey magic bytes\n            // Message ID is bytes 4-5. Message length starts at byte 6.\n            const firstView = new DataView(first.buffer.slice(first.byteOffset, first.byteOffset + first.byteLength));\n            const valid = (firstView.getUint32(0) & 0xffffff00) === 0x3f232300;\n            const msgLength = firstView.getUint32(5);\n            if (!valid)\n                throw new Error(\"message not valid\");\n            const buffer = new Uint8Array(9 + 2 + msgLength);\n            buffer.set(first.slice(0, Math.min(first.length, buffer.length)));\n            for (let offset = first.length; offset < buffer.length;) {\n                // Drop USB \"?\" reportId in the first byte\n                let next = (yield this.delegate.readChunk(debugLink)).slice(1);\n                buffer.set(next.slice(0, Math.min(next.length, buffer.length - offset)), offset);\n                offset += next.length;\n            }\n            return buffer;\n        });\n    }\n    getVendor() {\n        return \"KeepKey\";\n    }\n    getEntropy(length) {\n        if (typeof window !== \"undefined\" && (window === null || window === void 0 ? void 0 : window.crypto)) {\n            return window.crypto.getRandomValues(new Uint8Array(length));\n        }\n        const { randomBytes } = require(\"crypto\");\n        return randomBytes(length);\n    }\n    getFirmwareHash(firmware) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof window !== \"undefined\" && (window === null || window === void 0 ? void 0 : window.crypto)) {\n                return new Uint8Array(yield window.crypto.subtle.digest({ name: \"SHA-256\" }, firmware));\n            }\n            const { createHash } = require(\"crypto\");\n            const hash = createHash(\"sha256\");\n            hash.update(firmware);\n            return hash.digest();\n        });\n    }\n    /**\n     * Utility function to cancel all pending calls whenver one of them is cancelled.\n     */\n    cancellable(inProgress) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield inProgress;\n            }\n            catch (e) {\n                // Throw away the error, as the other context will handle it,\n                // unless it was a cancel, in which case we cancel everything.\n                if (core.isIndexable(e) && e.type === core.HDWalletErrorType.ActionCancelled) {\n                    this.callInProgress = { main: undefined, debug: undefined };\n                    throw e;\n                }\n            }\n        });\n    }\n    lockDuring(action) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.callInProgress.main = (() => __awaiter(this, void 0, void 0, function* () {\n                yield this.cancellable(this.callInProgress.main);\n                return action();\n            }))();\n            return this.callInProgress.main;\n        });\n    }\n    handleCancellableResponse(messageType) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const event = (yield core.takeFirstOfManyEvents(this, [String(messageType), ...responseTypeRegistry_1.EXIT_TYPES]).toPromise());\n            return this.readResponse(false);\n        });\n    }\n    readResponse(debugLink) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let buf;\n            do {\n                buf = yield this.read(debugLink);\n            } while (!buf);\n            const [msgTypeEnum, msg] = this.fromMessageBuffer(buf);\n            let event = core.makeEvent({\n                message_type: typeRegistry_1.messageNameRegistry[msgTypeEnum],\n                message_enum: msgTypeEnum,\n                message: msg.toObject(),\n                proto: msg,\n                from_wallet: true,\n            });\n            this.emit(String(msgTypeEnum), event);\n            if (debugLink)\n                return event;\n            if (msgTypeEnum === Messages.MessageType.MESSAGETYPE_FAILURE) {\n                const failureEvent = core.makeEvent({\n                    message_type: core.Events.FAILURE,\n                    message_enum: msgTypeEnum,\n                    message: msg.toObject(),\n                    from_wallet: true,\n                });\n                this.emit(core.Events.FAILURE, failureEvent);\n                return failureEvent;\n            }\n            if (msgTypeEnum === Messages.MessageType.MESSAGETYPE_BUTTONREQUEST) {\n                this.emit(core.Events.BUTTON_REQUEST, core.makeEvent({\n                    message_type: core.Events.BUTTON_REQUEST,\n                    from_wallet: true,\n                }));\n                this.userActionRequired = true;\n                return this.call(Messages.MessageType.MESSAGETYPE_BUTTONACK, new Messages.ButtonAck(), {\n                    msgTimeout: core.LONG_TIMEOUT,\n                    omitLock: true,\n                });\n            }\n            if (msgTypeEnum === Messages.MessageType.MESSAGETYPE_ENTROPYREQUEST) {\n                const ack = new Messages.EntropyAck();\n                ack.setEntropy(this.getEntropy(32));\n                return this.call(Messages.MessageType.MESSAGETYPE_ENTROPYACK, ack, {\n                    msgTimeout: core.LONG_TIMEOUT,\n                    omitLock: true,\n                });\n            }\n            if (msgTypeEnum === Messages.MessageType.MESSAGETYPE_PINMATRIXREQUEST) {\n                this.emit(core.Events.PIN_REQUEST, core.makeEvent({\n                    message_type: core.Events.PIN_REQUEST,\n                    from_wallet: true,\n                }));\n                this.userActionRequired = true;\n                return this.handleCancellableResponse(Messages.MessageType.MESSAGETYPE_PINMATRIXACK);\n            }\n            if (msgTypeEnum === Messages.MessageType.MESSAGETYPE_PASSPHRASEREQUEST) {\n                this.emit(core.Events.PASSPHRASE_REQUEST, core.makeEvent({\n                    message_type: core.Events.PASSPHRASE_REQUEST,\n                    from_wallet: true,\n                }));\n                this.userActionRequired = true;\n                return this.handleCancellableResponse(Messages.MessageType.MESSAGETYPE_PASSPHRASEACK);\n            }\n            if (msgTypeEnum === Messages.MessageType.MESSAGETYPE_CHARACTERREQUEST) {\n                this.emit(core.Events.CHARACTER_REQUEST, core.makeEvent({\n                    message_type: core.Events.CHARACTER_REQUEST,\n                    from_wallet: true,\n                }));\n                this.userActionRequired = true;\n                return this.handleCancellableResponse(Messages.MessageType.MESSAGETYPE_CHARACTERACK);\n            }\n            if (msgTypeEnum === Messages.MessageType.MESSAGETYPE_WORDREQUEST) {\n                this.emit(core.Events.WORD_REQUEST, core.makeEvent({\n                    message_type: core.Events.WORD_REQUEST,\n                    from_wallet: true,\n                }));\n                this.userActionRequired = true;\n                return this.handleCancellableResponse(Messages.MessageType.MESSAGETYPE_WORDACK);\n            }\n            return event;\n        });\n    }\n    call(msgTypeEnum, msg, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            options !== null && options !== void 0 ? options : (options = {});\n            (_a = options.msgTimeout) !== null && _a !== void 0 ? _a : (options.msgTimeout = core.DEFAULT_TIMEOUT);\n            this.emit(String(msgTypeEnum), core.makeEvent({\n                message_type: typeRegistry_1.messageNameRegistry[msgTypeEnum],\n                message_enum: msgTypeEnum,\n                message: msg.toObject(),\n                proto: msg,\n                from_wallet: false,\n            }));\n            const makePromise = () => __awaiter(this, void 0, void 0, function* () {\n                if ([\n                    Messages.MessageType.MESSAGETYPE_BUTTONACK,\n                    Messages.MessageType.MESSAGETYPE_PASSPHRASEACK,\n                    Messages.MessageType.MESSAGETYPE_CHARACTERACK,\n                    Messages.MessageType.MESSAGETYPE_PINMATRIXACK,\n                    Messages.MessageType.MESSAGETYPE_WORDACK,\n                ].includes(msgTypeEnum)) {\n                    this.userActionRequired = true;\n                }\n                yield this.write(this.toMessageBuffer(msgTypeEnum, msg), !!(options === null || options === void 0 ? void 0 : options.debugLink));\n                if (options === null || options === void 0 ? void 0 : options.noWait)\n                    return undefined;\n                const response = yield this.readResponse(!!(options === null || options === void 0 ? void 0 : options.debugLink));\n                this.userActionRequired = false;\n                if (response.message_enum === Messages.MessageType.MESSAGETYPE_FAILURE &&\n                    response.message.code === Types.FailureType.FAILURE_ACTIONCANCELLED) {\n                    this.callInProgress = { main: undefined, debug: undefined };\n                    throw new core.ActionCancelled();\n                }\n                if (response.message_type === core.Events.FAILURE)\n                    throw response;\n                return response;\n            });\n            if (options === null || options === void 0 ? void 0 : options.omitLock)\n                return makePromise();\n            // See the comments in hdwallet-trezor-connect's call for why this weird\n            // sequence. We've got a very similar issue here that needs pretty much\n            // the same solution.\n            const lockKey = (options === null || options === void 0 ? void 0 : options.debugLink) ? \"debug\" : \"main\";\n            this.callInProgress[lockKey] = (() => __awaiter(this, void 0, void 0, function* () {\n                yield this.cancellable(this.callInProgress[lockKey]);\n                try {\n                    return makePromise();\n                }\n                finally {\n                    this.userActionRequired = false;\n                }\n            }))();\n            return yield this.callInProgress[lockKey];\n        });\n    }\n    cancel() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.userActionRequired)\n                return;\n            try {\n                this.callInProgress = { main: undefined, debug: undefined };\n                const cancelMsg = new Messages.Cancel();\n                yield this.call(Messages.MessageType.MESSAGETYPE_CANCEL, cancelMsg, {\n                    noWait: this.userActionRequired\n                });\n            }\n            catch (e) {\n                console.error(\"Cancel Pending Error\", e);\n            }\n            finally {\n                this.callInProgress = { main: undefined, debug: undefined };\n            }\n        });\n    }\n    toMessageBuffer(msgTypeEnum, msg) {\n        const messageBuffer = msg.serializeBinary();\n        const headerBuffer = new Uint8Array(8);\n        const headerView = new DataView(headerBuffer.buffer);\n        headerView.setUint8(0, 0x23);\n        headerView.setUint8(1, 0x23);\n        headerView.setUint16(2, msgTypeEnum);\n        headerView.setUint32(4, messageBuffer.byteLength);\n        const fragments = [headerBuffer, messageBuffer];\n        const fragmentBuffer = new Uint8Array(fragments.map((x) => x.length).reduce((a, x) => a + x, 0));\n        fragments.reduce((a, x) => (fragmentBuffer.set(x, a), a + x.length), 0);\n        return fragmentBuffer;\n    }\n    fromMessageBuffer(buf) {\n        const typeID = new DataView(buf.buffer).getUint16(3);\n        const MType = typeRegistry_1.messageTypeRegistry[typeID];\n        if (!MType) {\n            const msg = new Messages.Failure();\n            msg.setCode(Types.FailureType.FAILURE_UNEXPECTEDMESSAGE);\n            msg.setMessage(\"Unknown message type received\");\n            return [Messages.MessageType.MESSAGETYPE_FAILURE, msg];\n        }\n        const msg = new MType();\n        const reader = new jspb.BinaryReader(buf, 9, buf.length - (9 + 2));\n        return [typeID, MType.deserializeBinaryFromReader(msg, reader)];\n    }\n    static failureMessageFactory(e) {\n        const msg = new Messages.Failure();\n        msg.setCode(Types.FailureType.FAILURE_UNEXPECTEDMESSAGE);\n        if (typeof e === \"string\") {\n            msg.setMessage(e);\n        }\n        else {\n            msg.setMessage(String(e));\n        }\n        return msg.serializeBinary();\n    }\n}\nexports.Transport = Transport;\n"},"sourceMaps":{"js":{"version":3,"file":"transport.js","sourceRoot":"","sources":["../src/transport.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"144760e38aa7f3198c5fb1a400e44aee","cacheData":{"env":{}}}